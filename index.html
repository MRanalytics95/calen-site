<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calen โ Night Reset</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="header">
  <!-- Right: logo + instagram (no box, no @ in the id) -->
  <div class="header-brand">
    <img src="logo.png" alt="Calen Logo" class="logo">

    <div class="instagram">
      <svg class="ig-icon" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M7.5 2h9A5.5 5.5 0 0 1 22 7.5v9A5.5 5.5 0 0 1 16.5 22h-9A5.5 5.5 0 0 1 2 16.5v-9A5.5 5.5 0 0 1 7.5 2Zm0 2A3.5 3.5 0 0 0 4 7.5v9A3.5 3.5 0 0 0 7.5 20h9a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 16.5 4h-9Zm4.5 4.2a5.8 5.8 0 1 1 0 11.6a5.8 5.8 0 0 1 0-11.6Zm0 2a3.8 3.8 0 1 0 0 7.6a3.8 3.8 0 0 0 0-7.6Zm6.2-2.5a1.1 1.1 0 1 1 0 2.2a1.1 1.1 0 0 1 0-2.2Z"/>
      </svg>
      <span>Calen.life</span>
    </div>
  </div>

  <!-- Left: Night Reset + tagline (left-aligned) -->
  <div class="header-copy">
    <div class="header-title">Night Reset</div>
    <div class="header-tagline">A calmer way to end the day</div>
  </div>
</header>

<section class="section center">
  <p class="text focus-text">
    ุงู ฺูุฏ ุฏูููุ<br>
    ุจุฑุง ุขุฑุงู ุดุฏู ุงุณุช.<br>
    ุจุฑุง ุชู.
  </p>
</section>

<section class="section">
  <p class="text">
    <span class="preicon" aria-hidden="true">
      <!-- calm / start icon -->
      <svg viewBox="0 0 24 24"><path d="M12 3c4.4 0 8 3.6 8 8c0 5.2-4.3 9.8-8 10c-3.7-.2-8-4.8-8-10c0-4.4 3.6-8 8-8Zm0 2a6 6 0 0 0-6 6c0 4.1 3.5 7.9 6 8c2.5-.1 6-3.9 6-8a6 6 0 0 0-6-6Z"/></svg>
    </span>
    ุงฺฏุฑ ูุงู ุจูุฏโฆ<br>
    ุฌุง ุฑุงุญุช ุจูุดู ุง ุฏุฑุงุฒ ุจฺฉุด.<br>
    ููุฑ ุตูุญู ุฑุง ฺฉู ฺฉูุชุฑ ฺฉู.<br><br>

    <span class="preicon" aria-hidden="true">
      <!-- tea icon -->
      <svg viewBox="0 0 24 24"><path d="M4 7h10v6a5 5 0 0 1-5 5H7a3 3 0 0 1-3-3V7Zm2 2v6a1 1 0 0 0 1 1h2a3 3 0 0 0 3-3V9H6Zm10 1h2a3 3 0 1 1 0 6h-2v-2h2a1 1 0 1 0 0-2h-2v-2Z"/></svg>
    </span>
    ุงฺฏุฑ ุฏูููุด ููุฑุงูุช ุงุณุชุ ุขุฑุงู ุจููุด.<br>
    ู ุงฺฏุฑ ุดูุน ุฏุงุฑุ ุฑูุดู ฺฉุฑุฏูุด ูโุชูุงูุฏ ูุถุง ุฑุง ุขุฑุงูโุชุฑ ฺฉูุฏ.<br><br>
  </p>
</section>

<!-- Music -->
<section class="section center">
  <p class="text">ููุณู ุจุฑุง ููุฑุงู ุงู ฺูุฏ ุฏููู</p>

  <div class="track" data-index="0" role="button" tabindex="0">
    <button class="track-btn" type="button" aria-label="ูพุฎุด / ุชููู Arrival"></button>
    <div class="track-label">๐ง Arrival <span>ุจุฑุง ูุฑูุฏ ุขุฑุงู</span></div>
  </div>

  <div class="track" data-index="1" role="button" tabindex="0">
    <button class="track-btn" type="button" aria-label="ูพุฎุด / ุชููู Release"></button>
    <div class="track-label">๐ง Release <span>ุจุฑุง ุฑูุง ุดุฏู ุงุฒ ุดููุบ ุฐูู</span></div>
  </div>

  <div class="track" data-index="2" role="button" tabindex="0">
    <button class="track-btn" type="button" aria-label="ูพุฎุด / ุชููู Settle"></button>
    <div class="track-label">๐ง Settle <span>ุจุฑุง ุขุฑุงู ฺฏุฑูุชู</span></div>
  </div>

  <audio id="audio-player"></audio>
</section>

<section class="section">
  <p class="text">
    <span class="preicon" aria-hidden="true">
      <!-- pause icon -->
      <svg viewBox="0 0 24 24"><path d="M10 5h2v14h-2V5Zm4 0h2v14h-2V5Z"/></svg>
    </span>
    ุงฺฏุฑ ุขูุงุฏฺฏโุงุด ุฑุง ุฏุงุฑุ<br>
    ู ุชูุงู ฺฉู ูฺฉุซ ฺฉู ู ุจุฑุง ุขุฑุงู ุชุฑ ุดุฏู ุฐููุช ุจู ุณูุงู ูุง ุฒุฑ ูพุงุณุฎ ุจุฏ.<br><br>

    <span class="preicon" aria-hidden="true">
      <!-- ok / enough icon -->
      <svg viewBox="0 0 24 24"><path d="M12 22a10 10 0 1 1 0-20a10 10 0 0 1 0 20Zm-1.2-7.2l6-6l-1.4-1.4l-4.6 4.6l-2-2L7.4 11l3.4 3.8Z"/></svg>
    </span>
    ู ุงฺฏุฑ ููุ<br>
    ูููโุฌุง ูู ฺฉุงูโุณุช.
  </p>
</section>

<section class="section reflection">
  <div class="questions">
    <div class="qitem">
      <span class="qicon" aria-hidden="true">
        <!-- moon -->
        <svg viewBox="0 0 24 24"><path d="M21 14.2A8.5 8.5 0 0 1 9.8 3a7 7 0 1 0 11.2 11.2Z"/></svg>
      </span>
      <div class="qtext">
        <div class="question">
          ุงูุดุจุ<br>
          ฺฉุฏุงู ูฺฉุฑ ุฑุง ูุงุฒู ูุณุช<br>
          ุจุง ุฎูุฏุช ุจู ุฎูุงุจ ุจุจุฑุ
        </div>
      </div>
    </div>

    <div class="qitem">
      <span class="qicon" aria-hidden="true">
        <!-- body / heart -->
        <svg viewBox="0 0 24 24"><path d="M12 21s-7-4.6-9.3-9C1.1 9.1 2.7 6 6.1 6c1.8 0 3 .9 3.9 2c.9-1.1 2.1-2 3.9-2c3.4 0 5 3.1 3.4 6c-2.3 4.4-9.3 9-9.3 9Z"/></svg>
      </span>
      <div class="qtext">
        <div class="question">
          ุจุฏูุช ุฏุฑ ุงู ูุญุธูุ<br>
          ุจุดุชุฑ ุจู ฺู ฺุฒ ูุงุฒ ุฏุงุฑุฏุ
        </div>
      </div>
    </div>

    <div class="qitem">
      <span class="qicon" aria-hidden="true">
        <!-- spark -->
        <svg viewBox="0 0 24 24"><path d="M12 2l1.6 6.1L20 12l-6.4 3.9L12 22l-1.6-6.1L4 12l6.4-3.9L12 2Z"/></svg>
      </span>
      <div class="qtext">
        <div class="question">
          ฺฉ ุงุชูุงู ุง ุญุณ ฺฉูฺฺฉ<br>
          ฺฉู ุงูุฑูุฒ ุจุงุจุชุด ูุฏุฑุฏุงู ูุณุชโฆ<br><br>
        </div>

        <div class="note-center">
          ูุงุฒ ุจู ูพุงุณุฎ ุฏุงุฏู ูุณุช.<br>
          ููู ูฺฉุซุ ฺฉุงูโุณุช.
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section center end">
  <p class="text">ุจุฑุง ุงูุฑูุฒุ ููู ุงูุฏุงุฒู ฺฉุงูโุณุช.</p>
  <p class="brand small">Calen</p>
</section>

<script>
/* ===== ุชูุธู ุชุฑฺฉโูุง ===== */
const tracks = [
  { title: "Arrival", file: "music/arrival.mp3" },
  { title: "Release", file: "music/release.mp3" },
  { title: "Settle",  file: "music/settle.mp3" }
];

const player = document.getElementById("audio-player");
const trackEls = Array.from(document.querySelectorAll(".track"));
let currentTrack = null;
let fadeInterval = null;

/* ===== UI State ===== */
function syncUI() {
  trackEls.forEach((el) => {
    const i = Number(el.dataset.index);
    const isPlaying = (i === currentTrack && !player.paused);
    el.classList.toggle("is-playing", isPlaying);
  });
}

/* ===== Fade In ===== */
function fadeIn(duration = 2500) {
  clearInterval(fadeInterval);
  player.volume = 0;

  const step = 0.03;
  const tick = Math.max(16, Math.floor(duration * step));
  fadeInterval = setInterval(() => {
    if (player.paused) {
      clearInterval(fadeInterval);
      return;
    }
    if (player.volume < 1) {
      player.volume = Math.min(player.volume + step, 1);
    } else {
      clearInterval(fadeInterval);
    }
  }, tick);
}

/* ===== ูพุฎุด / ุชููู ุชุฑฺฉ ===== */
async function playTrack(index) {
  clearInterval(fadeInterval);

  if (currentTrack === index && !player.paused) {
    player.pause();
    syncUI();
    return;
  }

  currentTrack = index;
  player.src = tracks[index].file;

  try {
    await player.play();
    fadeIn();
  } catch (e) {}
  syncUI();
}

/* ===== ฺฉูฺฉ + ฺฉุจูุฑุฏ ===== */
trackEls.forEach((el) => {
  const index = Number(el.dataset.index);

  el.addEventListener("click", (ev) => {
    ev.preventDefault();
    playTrack(index);
  });

  el.addEventListener("keydown", (ev) => {
    if (ev.key === "Enter" || ev.key === " ") {
      ev.preventDefault();
      playTrack(index);
    }
  });
});

player.addEventListener("play", syncUI);
player.addEventListener("pause", syncUI);

/* ===== ูพุฎุด ุฎูุฏฺฉุงุฑ ุชุฑฺฉ ุจุนุฏ ===== */
player.addEventListener("ended", async () => {
  if (currentTrack !== null && currentTrack < tracks.length - 1) {
    currentTrack++;
    player.src = tracks[currentTrack].file;
    try {
      await player.play();
      fadeIn();
    } catch (e) {}
    syncUI();
  } else {
    syncUI();
  }
});
</script>

</body>
</html>